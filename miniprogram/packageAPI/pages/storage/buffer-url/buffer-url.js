import { i18n,lang } from '../../../../i18n/lang'
Page({
  onShareAppMessage() {
    return {
      title: 'buffer URL',
      path: 'packageAPI/pages/storage/buffer-url/buffer-url'
    }
  },

  data: {
    theme: 'light',
    url: '',
    revoked: false,
    base64: '/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QOLaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MjJkZjU3YzAtNWM2ZC00YjY0LWI3MmMtMzA4NGQ1MzNjYTAxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjNFMjFCQkFEN0ZFMTExRTY4MkM4QTYyMzUzRjBBRDQ0IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNFMjFCQkFDN0ZFMTExRTY4MkM4QTYyMzUzRjBBRDQ0IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzVCQUZFMzhFMTdGRTYxMTkwQURFQUREQkU4MTI2MTgiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDoxMGJhNjU3Mi1jMDZlLTExNzktYTA2ZC1lYTkwZWEyOGJiZGIiLz4gPC9yZGY6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'
  },

  onLoad() {
    this.setData({
      t: i18n,
      lang
    })

    if (wx.onThemeChange) {
      wx.onThemeChange(({ theme }) => {
        this.setData({ theme })
      })
    }
  },

  createBufferURL() {
    const buffer = wx.base64ToArrayBuffer(this.data.base64)
    const url = wx.createBufferURL(buffer)
    this.setData({
      url,
      revoked: false
    })
    wx.showToast({
      title: i18n['buffer0'],
      icon: 'success'
    })
    console.log('===url', url);
  },

  revokeBufferURL() {
    if (this.data.url) {
      wx.revokeBufferURL(this.data.url)
      this.setData({
        revoked: true
      });
      wx.showToast({
        title: i18n['buffer1'],
        icon: 'success'
      })
    } else {
      wx.showToast({
        title: i18n['buffer2'],
        icon: 'none'
      })
    }
  }
})
